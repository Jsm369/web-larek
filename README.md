# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура

### Базовый код

#### Класс Api
Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов\
Методы: 
- `get` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер
- `post` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

#### Класс EventEmitter
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий\
Методы:
- `on` - подписка на событие
- `emit` - инициализация события
- `trigger` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие   

#### Класс Component
Абстрактный класс, который отвечает за создание пользовательского интерфейса\
Методы:
- `toggleClass` - переключение класса
- `setText`(protected) - устанавливает текстовое содержимое
- `setDisabled` - меняет статус блокировки
- `setHidden`(protected) - скрывает элемент
- `setVisible`(protected) - показывает элемент
- `setImage`(protected) - устанавливает изображение с альтернативным текстом
- `render` - возвращает обновленный контейнер компонента 

#### Класс Model 
Абстрактный класс, в котором хранятся данные, для последующей передачи\
Метод: 
- `emitChanges` - сообщает о изменении модели

#### Класс Form
Класс, нужный для управления интерактивности формы\
Сеттеры:
- `set valid(value: boolean)` - управляет доступность кнопки(если true то кнопка станет доступной)
- `set errors(value: boolean)` - устанавлияет текст ошибки для пользователя\

Методы:
- `onInputChange`(protected) - событие при изменении значений в полях формы
- `render` - обновляет состояние формы

#### Класс Contact 
Класс отвечает за управление инпутами телефона и email.\
Выполняет роль расширения класса Form
Сеттеры:
- `set phone && email` - устанавливают значения в инпуты формы

#### Класс Order
Класс отвечает за управление инпутом адресса и выбором метода оплаты\
Выполняет роль расширения класса Form\
Сеттеры:
- `set adress(value: string)` - устанавливает значение в инпут адреса в форме
- `set payment(name: string)` - управляет активным состоянием кнопок выбора способа оплаты

### Компоненты модели данных

#### класс AppData
Класс для реализация работы с моделью приложения\
Методы:
- `addToBasket` - добавляет в корзину
- `removeFromBasket` - удаляет из корзины
- `clearBasket` - очищает корзину
- `getBasketLenght` - получает кол-во элементов в корзине
- `getTotalPrice` - получает общую стоимость корзины

### Классы представления

#### Класс Page
Класс который отвечает за управление различными элементами страницы и ее поведением\
Выполняет роль расширения класса Component\
Сеттеры:
- `set counter(value: number)` - устанавливает значение счетчика корзины
- `set catalog(items: HTMLElement[])` - управляет содержимым каталога, заменяет текущие дочерние элементы новыми
- `set locked(value: boolean)` - управляет состоянием блокировки страницы

#### Класс Basket
Класс который отвечает за отображение и управления корзиной\
Сеттеры:
- `set items(items: HTMLElement[])` - устанавливает элементы товаров в корзине
- `set selected(items: string[])` - устанавливает доступность кнопки
- `set total(total: number)` - устанавливает общую сумму заказа в корзине

#### Класс Modal 
Класс представляющий собой компонент модального окна\
Выполняет роль расширения класса Component\
Сеттеры:
- `set content(value: HTMLElement)` - устанавливает содержимое модального окна

Методы:
- `open` - открывает модальное окно путем добавления класса
- `close` - закрывает модальное окно путем удаления класса
- `render` - возвращает контейнер модального окна

#### Класс Card
Класс представляет компонент карточки продукта на веб-странице\
Выполняет роль расширения класса Component\
Сеттеры и Геттеры: 
- `set id(value: string) && get id(): string` - устанавливает и получает идентификатор карточки
- `set title(value: string) && get title(): string` - устанавливает и получает заголовок карточки.
- `set image(value: string)` - устанавливает изображение карточки и связанный с ним текст
- `set price(value: string) && get price(): string` - устанавливает и получает цену продукта, также управляет доступностью кнопки 
- `set category(value: string) && get category(): string` - устанавливает и получает категорию продукта, также добавляя класс из объекта
- `set description(value: string) && get description(): string` - устанавливает и получает описание продукта
- `set button(value: string)` - устанавливает текст на кнопке

### Типы и Интерфесы
- `IAppData` - описывает основные данные приложения
- `IProduct` - описывает структуру продукта
- `IBasket` - описывает интерфейс корзины
- `IOrderStatus` - описывает структуру заказа

#### Utils/constants 
`settings` - объект с категориями для сортировки
  

